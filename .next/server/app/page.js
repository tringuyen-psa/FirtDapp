(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8347:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),t(5480),t(2029),t(5866);var r=t(3191),n=t(8716),a=t(7922),i=t.n(a),l=t(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5480)),"/home/nvt/Music/Dự \xc1n/FirtDapp/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"/home/nvt/Music/Dự \xc1n/FirtDapp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/nvt/Music/Dự \xc1n/FirtDapp/src/app/page.tsx"],m="/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},59:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},4649:()=>{},1864:(e,s,t)=>{Promise.resolve().then(t.bind(t,4497))},5047:(e,s,t)=>{"use strict";var r=t(7389);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},4497:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(326),n=t(7577),a=t(5047),i=t(5191),l=t(6087);function o(){let[e,s]=(0,n.useState)([]),[t,o]=(0,n.useState)({today:{total:0,count:0},week:{total:0,count:0},month:{total:0,count:0}}),[c,d]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1),u=(0,a.useRouter)(),h=async()=>{try{let e=new Date().getTime(),t=await fetch(`/api/expenses?limit=5&_t=${e}`);if(t.ok){let e=await t.json();s(e.slice(0,5))}}catch(e){console.error("Error fetching recent expenses:",e)}},g=async()=>{try{let e=await fetch("/api/stats");if(e.ok){let s=await e.json();o(s)}}catch(e){console.error("Error fetching stats:",e)}},p=async e=>{x(!0);try{if((await fetch("/api/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)d(!1),h(),g();else throw Error("Failed to save expense")}catch(e){console.error("Error saving expense:",e),alert("C\xf3 lỗi xảy ra. Vui l\xf2ng thử lại!")}finally{x(!1)}},b=e=>new Date(e).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),y=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),j=(e,s)=>e/s.length;return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDCB0 Quản L\xfd Tiền Trọ"})}),(0,r.jsxs)("nav",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>u.push("/expenses"),className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Tổng hợp"}),r.jsx("button",{onClick:()=>u.push("/summary"),className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"T\xf3m tắt"})]})]})})}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-1",children:[c?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Nhập Khoản Chi Mới"}),r.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),r.jsx(i.Z,{onSubmit:p,isLoading:m})]}):(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Nhập Khoản Chi Nhanh"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Th\xeam khoản chi mới cho nh\xf3m trọ"}),r.jsx("button",{onClick:()=>d(!0),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"+ Nhập khoản chi mới"})]}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mt-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Thống K\xea Nhanh"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"H\xf4m nay"}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"font-semibold text-blue-600",children:y(t.today.total)}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[t.today.count," khoản chi"]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Tuần n\xe0y"}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"font-semibold text-green-600",children:y(t.week.total)}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[t.week.count," khoản chi"]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Th\xe1ng n\xe0y"}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"font-semibold text-purple-600",children:y(t.month.total)}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[t.month.count," khoản chi"]})]})]})]})]})]}),(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"5 Khoản Chi Gần Nhất"}),r.jsx("button",{onClick:()=>u.push("/expenses"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Xem tất cả →"})]})}),r.jsx("div",{className:"divide-y divide-gray-200",children:0===e.length?(0,r.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[r.jsx("div",{className:"mb-4",children:r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),r.jsx("p",{children:"Chưa c\xf3 khoản chi n\xe0o"}),r.jsx("button",{onClick:()=>d(!0),className:"mt-2 text-blue-600 hover:text-blue-700 font-medium",children:"Nhập khoản chi đầu ti\xean"})]}):e.map(e=>r.jsx("div",{className:"p-4 hover:bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:e.description}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${(0,l.s)(e.payer).bg} ${(0,l.s)(e.payer).text} ${(0,l.s)(e.payer).border}`,children:e.payer})]}),(0,r.jsxs)("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500",children:[r.jsx("span",{children:b(e.expenseDate)}),(0,r.jsxs)("span",{className:"flex flex-wrap gap-1",children:["Người ti\xeau:",e.consumers.map((e,s)=>r.jsx("span",{className:`inline-block px-2 py-1 text-xs leading-4 font-medium rounded-full border ${(0,l.s)(e).bg} ${(0,l.s)(e).text} ${(0,l.s)(e).border}`,children:e},s))]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:y(e.amount)}),(0,r.jsxs)("div",{className:"text-xs text-indigo-600",children:[y(j(e.amount,e.consumers)),"/người"]})]})]})},e.id))})]}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("button",{onClick:()=>u.push("/expenses"),className:"flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v1a3 3 0 003 3h0a3 3 0 003-3v-1m3-10V4a2 2 0 00-2-2H8a2 2 0 00-2 2v3m3 6h6"})}),"Xem tất cả khoản chi"]}),(0,r.jsxs)("button",{onClick:()=>u.push("/summary"),className:"flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Xem thống k\xea"]})]})]})]})})]})}},5191:(e,s,t)=>{"use strict";t.d(s,{Z:()=>m});var r=t(326),n=t(7577),a=t(4723),i=t(4064),l=t(770),o=t(6087);let c=l.Ry({amount:l.Rx().min(1e3,"Số tiền tối thiểu 1.000đ"),description:l.Z_().min(1,"Nhập t\xean khoản chi"),payer:l.Km(["Tr\xed","Long","Đức","Đạt","To\xe0n","Quỹ"]),consumers:l.IX(l.Km(["Tr\xed","Long","Đức","Đạt","To\xe0n","Quỹ"])).min(1,"Chọn \xedt nhất 1 người ti\xeau"),date:l.Z_()}),d=["Tr\xed","Long","Đức","Đạt","To\xe0n","Quỹ"];function m({onSubmit:e,isLoading:s=!1}){let[t,l]=(0,n.useState)([]),{register:m,handleSubmit:x,setValue:u,watch:h,reset:g,formState:{errors:p}}=(0,a.cI)({resolver:(0,i.F)(c),defaultValues:{date:new Date().toISOString().split("T")[0],consumers:[]}}),b=e=>{let s;l(s="Quỹ"===e?t.includes(e)?[]:["Quỹ"]:t.includes("Quỹ")?t.includes(e)?[]:[e]:t.includes(e)?t.filter(s=>s!==e):[...t,e]),u("consumers",s)};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Nhập Khoản Chi Mới"}),(0,r.jsxs)("form",{onSubmit:x(s=>{e(s),g(),l([])}),className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Số tiền (VNĐ)"}),r.jsx("input",{type:"number",...m("amount",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"100000"}),p.amount&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.amount.message})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xean khoản chi"}),r.jsx("input",{type:"text",...m("description"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"VD: Đi ăn tối, Mua đồ ăn s\xe1ng..."}),p.description&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.description.message})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Người chi"}),(0,r.jsxs)("select",{...m("payer"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Chọn người chi"}),d.map(e=>r.jsx("option",{value:e,children:e},e))]}),p.payer&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.payer.message})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Người ti\xeau (chọn nhiều)"}),r.jsx("div",{className:"text-xs text-gray-500 mb-2",children:'* "Quỹ" l\xe0 cho cả 5 th\xe0nh vi\xean, kh\xf4ng thể chọn c\xf9ng l\xfac với th\xe0nh vi\xean cụ thể'}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.map(e=>(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:t.includes(e),onChange:()=>b(e),disabled:"Quỹ"!==e&&t.includes("Quỹ")||"Quỹ"===e&&t.some(e=>"Quỹ"!==e),className:`w-4 h-4 border-gray-300 rounded focus:ring-2 focus:ring-blue-500 ${"Quỹ"!==e&&t.includes("Quỹ")||"Quỹ"===e&&t.some(e=>"Quỹ"!==e)?"opacity-50 cursor-not-allowed":""}`}),r.jsx("span",{className:`text-sm font-medium ${"Quỹ"===e?(0,o.s)("Quỹ").text:(0,o.s)(e).text}`,children:e})]},e))}),p.consumers&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.consumers.message})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ng\xe0y chi"}),r.jsx("input",{type:"date",...m("date"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),p.date&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.date.message})]}),r.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Đang lưu...":"Lưu khoản chi"})]})]})}},6087:(e,s,t)=>{"use strict";t.d(s,{s:()=>n});let r={Trí:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"},Long:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},Đức:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"},Đạt:{bg:"bg-red-100",text:"text-red-800",border:"border-red-200"},Toàn:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"},Quỹ:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"}};function n(e){return r[e]||{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"}}},2029:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,metadata:()=>i});var r=t(9510),n=t(5317),a=t.n(n);t(5023);let i={title:"Quản L\xfd Tiền Trọ",description:"Hệ thống quản l\xfd chi ti\xeau chung cho ph\xf2ng trọ"};function l({children:e}){return r.jsx("html",{lang:"vi",children:r.jsx("body",{className:a().className,children:e})})}},5480:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/home/nvt/Music/Dự Án/FirtDapp/src/app/page.tsx#default`)},5023:()=>{}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,347,148],()=>t(8347));module.exports=r})();