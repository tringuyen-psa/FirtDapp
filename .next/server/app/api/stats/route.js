"use strict";(()=>{var e={};e.id=961,e.ids=[961],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1554:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d});var a={};r.r(a),r.d(a,{GET:()=>l});var n=r(9303),s=r(8716),o=r(670),i=r(728),u=r(7070);async function l(){try{let e=new Date;e.setHours(0,0,0,0);let t=new Date(e),r=e.getDay(),a=e.getDate()-r+(0===r?-6:1);t.setDate(a),t.setHours(0,0,0,0);let n=new Date(e.getFullYear(),e.getMonth(),1),s=await i._.expense.findMany({orderBy:{expenseDate:"desc"}}),o=s.filter(t=>{let r=new Date(t.expenseDate);return r.setHours(0,0,0,0),r.getTime()===e.getTime()}),l=s.filter(e=>new Date(e.expenseDate)>=t),p=s.filter(e=>new Date(e.expenseDate)>=n),c={today:{total:o.reduce((e,t)=>{let r=parseFloat(t.amount.toString());return e+r},0),count:o.length},week:{total:l.reduce((e,t)=>{let r=parseFloat(t.amount.toString());return e+r},0),count:l.length},month:{total:p.reduce((e,t)=>{let r=parseFloat(t.amount.toString());return e+r},0),count:p.length}};return u.NextResponse.json(c,{headers:{"Cache-Control":"public, max-age=30, stale-while-revalidate=60"}})}catch(e){return console.error("Error fetching stats:",e),u.NextResponse.json({error:"Failed to fetch stats"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/stats/route",pathname:"/api/stats",filename:"route",bundlePath:"app/api/stats/route"},resolvedPagePath:"/home/nvt/Music/Dá»± \xc1n/FirtDapp/src/app/api/stats/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:g}=p,h="/api/stats/route";function m(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}},728:(e,t,r)=>{let a;r.d(t,{_:()=>a}),a=new(require("@prisma/client")).PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,972],()=>r(1554));module.exports=a})();