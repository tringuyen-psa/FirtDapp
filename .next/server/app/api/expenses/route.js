"use strict";(()=>{var e={};e.id=879,e.ids=[879],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5221:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>g,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{GET:()=>u,POST:()=>c});var a=r(9303),n=r(8716),o=r(670),i=r(728),p=r(7070);async function u(e){try{let{searchParams:t}=new URL(e.url),r=t.get("month"),s=t.get("year"),a=t.get("payer"),n=t.get("consumers"),o=t.get("limit"),u={};if(r&&s){let e=new Date(`${s}-${parseInt(r).toString().padStart(2,"0")}-01`),t=new Date(`${s}-${(parseInt(r)+1).toString().padStart(2,"0")}-01`);u={...u,expenseDate:{gte:e,lt:t}}}if(a&&"all"!==a&&"Tất cả"!==a&&(u={...u,payer:a}),n){let e=n.split(",");u={...u,consumers:{hasSome:e}}}let c=await i._.expense.findMany({where:u,orderBy:{expenseDate:"desc"},take:o?parseInt(o):void 0});return p.NextResponse.json(c,{headers:{"Cache-Control":"public, max-age=60, stale-while-revalidate=300"}})}catch(e){return console.error("Error fetching expenses:",e),p.NextResponse.json({error:"Failed to fetch expenses"},{status:500})}}async function c(e){try{let t=await e.json(),r=await i._.expense.create({data:{amount:t.amount,description:t.description,payer:t.payer,consumers:t.consumers,expenseDate:new Date(t.date)}});return p.NextResponse.json(r,{status:201})}catch(e){return console.error("Error creating expense:",e),p.NextResponse.json({error:"Failed to create expense"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/expenses/route",pathname:"/api/expenses",filename:"route",bundlePath:"app/api/expenses/route"},resolvedPagePath:"/home/nvt/Music/Dự \xc1n/FirtDapp/src/app/api/expenses/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:x,serverHooks:m}=l,h="/api/expenses/route";function g(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:x})}},728:(e,t,r)=>{r.d(t,{_:()=>a});let s=require("@prisma/client"),a=globalThis.prisma??new s.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972],()=>r(5221));module.exports=s})();